<ng-container *ngIf="player$ | async as player">
  <div class="flex flex-row items-center p-3 gap-3">
    <fa-icon
      [icon]="(player.isPlaying$ | async) ? faPause : faPlay"
      class="cursor-pointer"
      (click)="togglePlay()"
    ></fa-icon>
    <app-seek-bar
      *ngIf="player.state$ | async as state"
      [value]="state.position / state.duration"
      (valueChange)="seek($event)"
      class="flex-grow"
    ></app-seek-bar>
    <div #delay></div>
  </div>
  <app-track
    *ngIf="analysis$ | async as analysis"
    [player]="player"
    [analysis]="analysis"
    (delayMs)="delay.innerHTML = $event.toFixed(0).toString()"
  ></app-track>
</ng-container>
